Unfortunately, my code passed only 900/999 test due to Time Limit Exceeded, so code is good but too slow

Possible solution:  
segment tree but idk how